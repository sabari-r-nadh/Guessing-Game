"use strict";(self.webpackChunkcodespaces_web_client=self.webpackChunkcodespaces_web_client||[]).push([[932],{43620:(e,n,t)=>{t.d(n,{m:()=>B});var r,a=t(41151),o=t(46928),s=t(6995),i=t(37122),u=t(58625),c=t(47974),d=t(31927),l=t(40675),f=t(61524),h=t(11345),v=t(80483),y=t(9051),p="sendAttempt",g="&"+h.fL+"=true",b=((r={})[1]=h.vG,r[100]=h.vG,r[200]="sent",r[8004]=h.N4,r[8003]=h.N4,r),m={},S={};function _(e,n,t){m[e]=n,!1!==t&&(S[n]=e)}function w(e){try{return e.responseText}catch(e){}return""}function H(e,n){var t=!1;if(e&&n){var r=(0,i.cG)(e);if(r&&r.length>0)for(var a=n.toLowerCase(),o=0;o<r.length;o++){var s=r[o];if(s&&(0,i.mQ)(n,s)&&s.toLowerCase()===a){t=!0;break}}}return t}function T(e,n,t,r){n&&t&&t.length>0&&(r&&m[n]?(e.hdrs[m[n]]=t,e.useHdrs=!0):e.url+="&"+n+"="+t)}_(h._s,h._s,!1),_(h.rv,h.rv),_(h.OF,"Client-Id"),_(h.Bd,h.Bd),_(h.uY,h.uY),_(h.YH,h.YH),_(h.z5,h.z5);var B=function(){function e(n,t,r,m,_){this._responseHandlers=[];var B,R,C,P,k,E,x,O="?cors=true&"+h.l6.toLowerCase()+"="+h.Xh,z=new s.A,K=!1,X=new o.A,G=!1,I=0,L=!0,A=[],q={},W=[],M=null,U=!1,D=!1,N=!1;(0,a.A)(e,this,(function(e){var a=!0;function o(e,n){for(var t=0,r=null,a=0;null==r&&a<e.length;)1===(t=e[a])?(0,u.PV)()?r=s:(0,u.xk)()&&(r=Y):2===t&&(0,u.R7)(n)?r=V:G&&3===t&&(0,u.Uf)()&&(r=Q),a++;return r?{_transport:t,_isSync:n,sendPOST:r}:null}function s(e,n,t){var r=new XDomainRequest;r.open(h.p2,e.urlString),e.timeout&&(r.timeout=e.timeout),r.onload=function(){var e=w(r);Z(n,200,{},e),ie(e)},r.onerror=function(){Z(n,400,{})},r.ontimeout=function(){Z(n,500,{})},r.onprogress=function(){},t?r.send(e.data):_.set((function(){r.send(e.data)}),0)}function V(e,n,t){var r,o=e.urlString,s=!1,u=!1,c=((r={body:e.data,method:h.p2})[h.H6]=!0,r);t&&(c.keepalive=!0,2===e._sendReason&&(s=!0,o+=g)),a&&(c.credentials="include"),e.headers&&(0,i.cG)(e.headers).length>0&&(c.headers=e.headers),fetch(o,c).then((function(e){var t={},r="",a=e.headers;a&&a.forEach((function(e,n){t[n]=e})),e.body&&e.text().then((function(e){r=e})),u||(u=!0,Z(n,e.status,t,r),ie(r))})).catch((function(e){u||(u=!0,Z(n,0,{}))})),s&&!u&&(u=!0,Z(n,200,{})),!u&&e.timeout>0&&_.set((function(){u||(u=!0,Z(n,500,{}))}),e.timeout)}function Y(e,n,t){var r=e.urlString;function o(e,n,t){if(!e[t]&&n&&n.getResponseHeader){var r=n.getResponseHeader(t);r&&(e[t]=(0,i.EH)(r))}return e}function s(e){var n={};return e.getAllResponseHeaders?n=function(e){var n={};if((0,i.Kg)(e)){var t=(0,i.EH)(e).split(/[\r\n]+/);(0,i.Iu)(t,(function(e){if(e){var t=e.indexOf(": ");if(-1!==t){var r=(0,i.EH)(e.substring(0,t)).toLowerCase(),a=(0,i.EH)(e.substring(t+1));n[r]=a}else n[(0,i.EH)(e)]=1}}))}return n}(e.getAllResponseHeaders()):(n=o(n,e,h.Vb),n=o(n,e,h.Gf),n=o(n,e,h.AD)),n}function u(e,t){Z(n,e.status,s(e),t)}t&&e.disableXhrSync&&(t=!1);var c=(0,d.H$)(h.p2,r,a,!0,t,e.timeout);(0,i.z)(e.headers,(function(e,n){c.setRequestHeader(e,n)})),c.onload=function(){var e=w(c);u(c,e),ie(e)},c.onerror=function(){u(c)},c.ontimeout=function(){u(c)},c.send(e.data)}function Z(e,n,t,r){try{e(n,t,r)}catch(e){(0,c.ZP)(R,2,518,(0,u.mm)(e))}}function Q(e,n,t){var r=200,a=e._thePayload,o=e.urlString+g;try{var s=(0,u.w3)();if(!s.sendBeacon(o,e.data))if(a){var d=[];(0,i.Iu)(a.batches,(function(e){if(d&&e&&e.count()>0){for(var n=e.events(),t=0;t<n.length;t++)if(!s.sendBeacon(o,M.getEventBlob(n[t]))){d.push(e.split(t));break}}else d.push(e.split(0))})),ue(d,8003,a.sendType,!0)}else r=0}catch(e){(0,c.OG)(R,"Failed to send telemetry using sendBeacon API. Ex:"+(0,u.mm)(e)),r=0}finally{Z(n,r,{},"")}}function $(e){return 2===e||3===e}function F(e){return D&&$(e)&&(e=2),e}function j(){return!K&&I<t}function J(){var e=W;return W=[],e}function ee(e,n,t){var r=!1;return e&&e.length>0&&!K&&C[n]&&M&&(r=0!==n||j()&&(t>0||X.allowRequestSending())),r}function ne(e){var n={};return e&&(0,i.Iu)(e,(function(e,t){n[t]={iKey:e.iKey(),evts:e.events()}})),n}function te(e,t,r,a,o){if(e&&0!==e.length)if(K)ue(e,1,a);else{a=F(a);try{var s=e,i=0!==a;(0,l.r2)(P,(function(){return"HttpManager:_sendBatches"}),(function(s){s&&(e=e.slice(0));for(var c=[],l=null,f=(0,d.WB)(),h=C[a]||(i?C[1]:C[0]),v=(D||$(a)||h&&3===h._transport)&&!L&&G&&(0,u.Uf)();ee(e,a,t);){var y=e.shift();y&&y.count()>0&&(z.isTenantKilled(y.iKey())?c.push(y):(l=l||M.createPayload(t,r,i,v,o,a),M.appendPayload(l,y,n)?null!==l.overflow&&(e=[l.overflow].concat(e),l.overflow=null,oe(l,f,(0,d.WB)(),o),f=(0,d.WB)(),l=null):(oe(l,f,(0,d.WB)(),o),f=(0,d.WB)(),e=[y].concat(e),l=null)))}l&&oe(l,f,(0,d.WB)(),o),e.length>0&&(W=e.concat(W)),ue(c,8004,a)}),(function(){return{batches:ne(s),retryCount:t,isTeardown:r,isSynchronous:i,sendReason:o,useSendBeacon:$(a),sendType:a}}),!i)}catch(e){(0,c.ZP)(R,2,48,"Unexpected Exception sending batch: "+(0,u.mm)(e))}}}function re(e,n){var t={url:O,hdrs:{},useHdrs:!1};n?(t.hdrs=(0,d.X$)(t.hdrs,q),t.useHdrs=(0,i.cG)(t.hdrs).length>0):(0,i.z)(q,(function(e,n){S[e]?T(t,S[e],n,!1):(t.hdrs[e]=n,t.useHdrs=!0)})),T(t,h.OF,"NO_AUTH",n),T(t,h.rv,d.xE,n);var r="";(0,i.Iu)(e.apiKeys,(function(e){r.length>0&&(r+=","),r+=e})),T(t,h.Bd,r,n),T(t,h.YH,(0,i.x3)().toString(),n);var a=function(e){for(var n=0;n<e.batches.length;n++){var t=e.batches[n].Msfpc();if(t)return encodeURIComponent(t)}return""}(e);if((0,d.yD)(a)&&(t.url+="&ext.intweb.msfpc="+a),X.shouldAddClockSkewHeaders()&&T(t,h.uY,X.getClockSkewHeaderValue(),n),P.getWParam){var o=P.getWParam();o>=0&&(t.url+="&w="+o)}for(var s=0;s<A.length;s++)t.url+="&"+A[s].name+"="+A[s].value;return t}function ae(e,n,t){e[n]=e[n]||{},e[n][B.identifier]=t}function oe(n,t,a,o){if(n&&n.payloadBlob&&n.payloadBlob.length>0){var s=!!e.sendHook,y=C[n.sendType];!$(n.sendType)&&n.isBeacon&&2===n.sendReason&&(y=C[2]||C[3]||y);var g=N;(n.isBeacon||3===y._transport)&&(g=!1);var b=re(n,g);g=g||b.useHdrs;var m=(0,d.WB)();(0,l.r2)(P,(function(){return"HttpManager:_doPayloadSend"}),(function(){for(var S=0;S<n.batches.length;S++)for(var _=n.batches[S].events(),w=0;w<_.length;w++){var T=_[w];if(U){var C=T.timings=T.timings||{};ae(C,"sendEventStart",m),ae(C,"serializationStart",t),ae(C,"serializationCompleted",a)}T[p]>0?T[p]++:T[p]=1}ue(n.batches,1e3+(o||0),n.sendType,!0);var k={data:n.payloadBlob,urlString:b.url,headers:b.hdrs,_thePayload:n,_sendReason:o,timeout:E};(0,i.b0)(x)||(k.disableXhrSync=!!x),g&&(H(k.headers,h.Zf)||(k.headers[h.Zf]=h.LB),H(k.headers,h.l6)||(k.headers[h.l6]=h.Xh));var O=null;y&&(O=function(t){X.firstRequestSent();var a=function(t,a){!function(n,t,a,o){var s=9e3,u=null,c=!1,l=!1;try{var y=!0;if(typeof n!==f.bA){if(t){X.setClockSkew(t[h.Vb]);var p=t[h.Gf]||t["kill-duration-seconds"];(0,i.Iu)(z.setKillSwitchTenants(t[h.Mr],p),(function(e){(0,i.Iu)(a.batches,(function(n){if(n.iKey()===e){u=u||[];var t=n.split(0);a.numEvents-=t.count(),u.push(t)}}))}))}if(200==n||204==n)return void(s=200);(!(0,v.t)(n)||a.numEvents<=0)&&(y=!1),s=9e3+n%1e3}if(y){s=100;var g=a.retryCnt;0===a.sendType&&(g<r?(c=!0,se((function(){0===a.sendType&&I--,te(a.batches,g+1,a.isTeardown,D?2:a.sendType,5)}),D,(0,v.L)(g))):(l=!0,D&&(s=8001)))}}finally{c||(X.setClockSkew(),function(n,t,r,a){try{a&&B._backOffTransmission(),200===t&&(a||n.isSync||B._clearBackOff(),function(e){if(U){var n=(0,d.WB)();(0,i.Iu)(e,(function(e){e&&e.count()>0&&function(e,n){U&&(0,i.Iu)(e,(function(e){ae(e.timings=e.timings||{},"sendEventCompleted",n)}))}(e.events(),n)}))}}(n.batches)),ue(n.batches,t,n.sendType,!0)}finally{0===n.sendType&&(I--,5!==r&&e.sendQueuedRequests(n.sendType,r))}}(a,s,o,l)),ue(u,8004,a.sendType)}}(t,a,n,o)},s=n.isTeardown||n.isSync;try{y.sendPOST(t,a,s),e.sendListener&&e.sendListener(k,t,s,n.isBeacon)}catch(e){(0,c.OG)(R,"Unexpected exception sending payload. Ex:"+(0,u.mm)(e)),Z(a,0,{})}}),(0,l.r2)(P,(function(){return"HttpManager:_doPayloadSend.sender"}),(function(){if(O)if(0===n.sendType&&I++,s&&!n.isBeacon&&3!==y._transport){var t={data:k.data,urlString:k.urlString,headers:(0,d.X$)({},k.headers),timeout:k.timeout,disableXhrSync:k.disableXhrSync},r=!1;(0,l.r2)(P,(function(){return"HttpManager:_doPayloadSend.sendHook"}),(function(){try{e.sendHook(t,(function(e){r=!0,L||e._thePayload||(e._thePayload=e._thePayload||k._thePayload,e._sendReason=e._sendReason||k._sendReason),O(e)}),n.isSync||n.isTeardown)}catch(e){r||O(k)}}))}else O(k)}))}),(function(){return{thePayload:n,serializationStart:t,serializationCompleted:a,sendReason:o}}),n.isSync)}n.sizeExceed&&n.sizeExceed.length>0&&ue(n.sizeExceed,8003,n.sendType),n.failedEvts&&n.failedEvts.length>0&&ue(n.failedEvts,8002,n.sendType)}function se(e,n,t){n?e():_.set(e,t)}function ie(n){var t=e._responseHandlers;try{for(var r=0;r<t.length;r++)try{t[r](n)}catch(e){(0,c.ZP)(R,1,519,"Response handler failed: "+e)}if(n){var a=JSON.parse(n);(0,d.yD)(a.webResult)&&(0,d.yD)(a.webResult[h._G])&&k.set("MSFPC",a.webResult[h._G],31536e3)}}catch(e){}}function ue(e,n,t,r){if(e&&e.length>0&&m){var a=m[function(e){var n=b[e];(0,d.yD)(n)||(n=h.L7,e>=9e3&&e<=9999?n=h.l$:e>=8e3&&e<=8999?n=h.N4:e>=1e3&&e<=1999&&(n=h.BC));return n}(n)];if(a){var o=0!==t;(0,l.r2)(P,(function(){return"HttpManager:_sendBatchesNotification"}),(function(){se((function(){try{a.call(m,e,n,o,t)}catch(e){(0,c.ZP)(R,1,74,"send request notification failed: "+e)}}),r||o,0)}),(function(){return{batches:ne(e),reason:n,isSync:o,sendSync:r,sendType:t}}),!o)}}}e.initialize=function(e,n,t,r,s){var d;s||(s={}),O=e+O,N=!!(0,i.b0)(s.avoidOptions)||!s.avoidOptions,P=n,k=n.getCookieMgr(),U=!P.config.disableEventTimings;var l=!!P.config.enableCompoundKey;R=(B=t).diagLog();var f=s.valueSanitizer,h=s.stringifyObjects;(0,i.b0)(s.enableCompoundKey)||(l=!!s.enableCompoundKey),E=s.xhrTimeout,x=s.disableXhrSync,G=!(0,u.lV)(),M=new y.h(P,f,h,l);var v=r,p=s.alwaysUseXhrOverride?r:null,g=s.alwaysUseXhrOverride?r:null;if(!r){L=!1;var b=(0,u.g$)();b&&b.protocol&&"file:"===b.protocol.toLowerCase()&&(a=!1);var m=[];m=(0,u.lV)()?[2,1]:[1,2,3];var S=s.transports;S&&((0,i.Et)(S)?m=[S].concat(m):(0,i.cy)(S)&&(m=S.concat(m))),r=o(m,!1),v=o(m,!0),r||(0,c.OG)(R,"No available transport to send events")}(d={})[0]=r,d[1]=v||o([1,2,3],!0),d[2]=p||o([3,2],!0)||v||o([1],!0),d[3]=g||o([2,3],!0)||v||o([1],!0),C=d},e._getDbgPlgTargets=function(){return[C[0],z,M,C]},e.addQueryStringParameter=function(e,n){for(var t=0;t<A.length;t++)if(A[t].name===e)return void(A[t].value=n);A.push({name:e,value:n})},e.addHeader=function(e,n){q[e]=n},e.canSendRequest=function(){return j()&&X.allowRequestSending()},e.sendQueuedRequests=function(e,n){(0,i.b0)(e)&&(e=0),D&&(e=F(e),n=2),ee(W,e,0)&&te(J(),0,!1,e,n||0)},e.isCompletelyIdle=function(){return!K&&0===I&&0===W.length},e.setUnloading=function(e){D=e},e.addBatch=function(e){if(e&&e.count()>0){if(z.isTenantKilled(e.iKey()))return!1;W.push(e)}return!0},e.teardown=function(){W.length>0&&te(J(),0,!0,2,2)},e.pause=function(){K=!0},e.resume=function(){K=!1,e.sendQueuedRequests(0,4)},e.sendSynchronousBatch=function(e,n,t){e&&e.count()>0&&((0,i.hX)(n)&&(n=1),D&&(n=F(n),t=2),te([e],0,!1,n,t||0))}}))}return e.__ieDyn=1,e}()}}]);