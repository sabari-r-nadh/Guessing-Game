"use strict";(self.webpackChunkcodespaces_web_client=self.webpackChunkcodespaces_web_client||[]).push([[382],{66134:(e,n,t)=>{t.d(n,{A:()=>E});var i=t(86783),a=t(41151),u=t(40675),o=t(47832),r=t(57039),c=t(31927),s=t(37122),l=t(58625),f=t(1761),d=t(47974),v=t(61022),h=t(80285),p=t(45487),m=t(43620),y=t(11345),g=t(80483),b=t(52405),x="eventsDiscarded",_="overrideInstrumentationKey",M="maxEventRetryAttempts",C="maxUnloadEventRetryAttempts";const E=function(e){function n(){var t,i=e.call(this)||this;i.identifier="PostChannel",i.priority=1011,i.version="3.2.4";var v,E,K,T,k,P,R,w=!1,z=[],D=null,I=!1,L=0,O=500,S=0,U=1e4,A={},q=h.z3,F=null,H=null,N=0,W=0,Q={},B=-1,X=!0,Z=!1,j=6,G=2;return(0,a.A)(n,i,(function(e,n){function i(e){"beforeunload"!==(e||(0,l.zk)().event).type&&(Z=!0,E.setUnloading(Z)),ie(2,2)}function a(e){Z=!1,E.setUnloading(Z)}function J(e,n){if(e.sendAttempt||(e.sendAttempt=0),e.latency||(e.latency=1),e.ext&&e.ext[y.m5]&&delete e.ext[y.m5],e.ext&&e.ext[y.Kp]&&e.ext[y.Kp].id&&delete e.ext[y.Kp].id,X&&(c.u9,e.ext=(0,s.hW)(e.ext),e.baseData&&(e.baseData=(0,s.hW)(e.baseData)),e.data&&(e.data=(0,s.hW)(e.data))),e.sync)if(N||I)e.latency=3,e.sync=!1;else if(E)return X&&(e=(0,s.hW)(e)),void E.sendSynchronousBatch(p.n.create(e.iKey,[e]),!0===e.sync?1:e.sync,3);var t=e.latency,i=S,a=U;4===t&&(i=L,a=O);var u=!1;if(i<a)u=!oe(e,n);else{var o=1,r=20;4===t&&(o=4,r=1),u=!0,function(e,n,t,i){for(;t<=n;){var a=ae(e,n,!0);if(a&&a.count()>0){var u=a.split(0,i),o=u.count();if(o>0)return 4===t?L-=o:S-=o,pe(x,[u],f.x.QueueFull),!0}t++}return re(),!1}(e.iKey,e.latency,o,r)&&(u=!oe(e,n))}u&&he(x,[e],f.x.QueueFull)}function V(e,n,t){var i=ce(e,n,t);return E.sendQueuedRequests(n,t),i}function Y(){return S>0}function $(){if(B>=0&&ce(B,0,k)&&E.sendQueuedRequests(0,k),L>0&&!H&&!I){var e=A[q][2];e>=0&&(H=ne((function(){H=null,V(4,0,1),$()}),e))}var n=A[q][1];!F&&!D&&n>=0&&!I&&(Y()?F=ne((function(){F=null,V(0===W?3:1,0,1),W++,W%=2,$()}),n):W=0)}function ee(){t=null,w=!1,z=[],D=null,I=!1,L=0,O=500,S=0,U=1e4,A={},q=h.z3,F=null,H=null,N=0,W=0,v=null,Q={},K=void 0,T=0,B=-1,k=null,X=!0,Z=!1,j=6,G=2,P=null,R=(0,b.D_)(),E=new m.m(500,2,1,{requeue:de,send:me,sent:ye,drop:ge,rspFail:be,oth:xe},R),fe(),Q[4]={batches:[],iKeyMap:{}},Q[3]={batches:[],iKeyMap:{}},Q[2]={batches:[],iKeyMap:{}},Q[1]={batches:[],iKeyMap:{}},_e()}function ne(e,n){0===n&&N&&(n=1);var t=1e3;return N&&(t=(0,g.L)(N-1)),R.set(e,n*t)}function te(){return null!==F&&(R.clear(F),F=null,W=0,!0)}function ie(e,n){te(),D&&(R.clear(D),D=null),I||V(1,e,n)}function ae(e,n,t){var i=Q[n];i||(i=Q[n=1]);var a=i.iKeyMap[e];return!a&&t&&(a=p.n.create(e),i.batches.push(a),i.iKeyMap[e]=a),a}function ue(n,t){E.canSendRequest()&&!N&&(K>0&&S>K&&(t=!0),t&&null==D&&e.flush(n,null,20))}function oe(e,n){X&&(e=(0,s.hW)(e));var t=e.latency,i=ae(e.iKey,t,!0);return!!i.addEvent(e)&&(4!==t?(S++,n&&0===e.sendAttempt&&ue(!e.sync,T>0&&i.count()>=T)):L++,!0)}function re(){for(var e=0,n=0,t=function(t){var i=Q[t];i&&i.batches&&(0,s.Iu)(i.batches,(function(i){4===t?e+=i.count():n+=i.count()}))},i=1;i<=4;i++)t(i);S=n,L=e}function ce(n,t,i){var a=!1,o=0===t;return!o||E.canSendRequest()?(0,u.r2)(e.core,(function(){return"PostChannel._queueBatches"}),(function(){for(var e=[],t=4;t>=n;){var i=Q[t];i&&i.batches&&i.batches.length>0&&((0,s.Iu)(i.batches,(function(n){E.addBatch(n)?a=a||n&&n.count()>0:e=e.concat(n.events()),4===t?L-=n.count():S-=n.count()})),i.batches=[],i.iKeyMap={}),t--}e.length>0&&he(x,e,f.x.KillSwitch),a&&B>=n&&(B=-1,k=0)}),(function(){return{latency:n,sendType:t,sendReason:i}}),!o):(B=B>=0?Math.min(B,n):n,k=Math.max(k,i)),a}function se(e,n){V(1,0,n),re(),le((function(){e&&e(),z.length>0?D=ne((function(){D=null,se(z.shift(),n)}),0):(D=null,$())}))}function le(e){E.isCompletelyIdle()?e():D=ne((function(){D=null,le(e)}),.25)}function fe(){(A={})[h.z3]=[2,1,0],A[h.RI]=[6,3,0],A[h.ev]=[18,9,0]}function de(n,t){var i=[],a=j;Z&&(a=G),(0,s.Iu)(n,(function(n){n&&n.count()>0&&(0,s.Iu)(n.events(),(function(n){n&&(n.sync&&(n.latency=4,n.sync=!1),n.sendAttempt<a?((0,c.u9)(n,e.identifier),J(n,!1)):i.push(n))}))})),i.length>0&&he(x,i,f.x.NonRetryableStatus),Z&&ie(2,2)}function ve(n,t){var i=e._notificationManager||{},a=i[n];if(a)try{a.apply(i,t)}catch(t){(0,d.ZP)(e.diagLog(),1,74,n+" notification failed: "+t)}}function he(e,n){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];n&&n.length>0&&ve(e,[n].concat(t))}function pe(e,n){for(var t=[],i=2;i<arguments.length;i++)t[i-2]=arguments[i];n&&n.length>0&&(0,s.Iu)(n,(function(n){n&&n.count()>0&&ve(e,[n.events()].concat(t))}))}function me(e,n,t){e&&e.length>0&&ve("eventsSendRequest",[n>=1e3&&n<=1999?n-1e3:0,!0!==t])}function ye(e,n){pe("eventsSent",e,n),$()}function ge(e,n){pe(x,e,n>=8e3&&n<=8999?n-8e3:f.x.Unknown)}function be(e){pe(x,e,f.x.NonRetryableStatus),$()}function xe(e,n){pe(x,e,f.x.Unknown),$()}function _e(){T=t&&t.disableAutoBatchFlushLimit?0:Math.max(1500,U/6)}ee(),e._getDbgPlgTargets=function(){return[E]},e.initialize=function(l,f,d){(0,u.r2)(f,(function(){return"PostChannel:initialize"}),(function(){var u=f;n.initialize(l,f,d);try{f.addUnloadCb;P=(0,o.Hm)((0,r.Z)(e.identifier),f.evtNamespace&&f.evtNamespace());var h=e._getTelCtx();l.extensionConfig[e.identifier]=l.extensionConfig[e.identifier]||{},t=h.getExtCfg(e.identifier),R=(0,b.D_)(t.setTimeoutOverride,t.clearTimeoutOverride),X=!t.disableOptimizeObj&&(0,c.F2)(),function(e){var n=e.getWParam;e.getWParam=function(){var e=0;return t.ignoreMc1Ms0CookieProcessing&&(e|=2),e|n()}}(u),t.eventsLimitInMem>0&&(U=t.eventsLimitInMem),t.immediateEventLimit>0&&(O=t.immediateEventLimit),t.autoFlushEventsLimit>0&&(K=t.autoFlushEventsLimit),(0,s.Et)(t[M])&&(j=t[M]),(0,s.Et)(t[C])&&(G=t[C]),_e(),t.httpXHROverride&&t.httpXHROverride.sendPOST&&(v=t.httpXHROverride),(0,c.yD)(l.anonCookieName)&&E.addQueryStringParameter("anoncknm",l.anonCookieName),E.sendHook=t.payloadPreprocessor,E.sendListener=t.payloadListener;var p=t.overrideEndpointUrl?t.overrideEndpointUrl:l.endpointUrl;e._notificationManager=l.extensionConfig.NotificationManager,E.initialize(p,e.core,e,v,t);var m=l.disablePageUnloadEvents||[];(0,o.ee)(i,m,P),(0,o.Fc)(i,m,P),(0,o.oS)(a,l.disablePageShowEvents,P)}catch(n){throw e.setInitialized(!1),n}}),(function(){return{coreConfig:l,core:f,extensions:d}}))},e.processTelemetry=function(n,i){(0,c.u9)(n,e.identifier);var a=(i=e._getTelCtx(i)).getExtCfg(e.identifier),u=!!t.disableTelemetry;a&&(u=u||!!a.disableTelemetry);var o=n;u||w||(t[_]&&(o.iKey=t[_]),a&&a[_]&&(o.iKey=a[_]),J(o,!0),Z?ie(2,2):$()),e.processNext(o,i)},e._doTeardown=function(e,n){ie(2,2),w=!0,E.teardown(),(0,o.Ds)(null,P),(0,o.sq)(null,P),(0,o.vF)(null,P),ee()},e.setEventQueueLimits=function(e,n){U=e>0?e:1e4,K=n>0?n:0,_e();var t=S>e;if(!t&&T>0)for(var i=1;!t&&i<=3;i++){var a=Q[i];a&&a.batches&&(0,s.Iu)(a.batches,(function(e){e&&e.count()>=T&&(t=!0)}))}ue(!0,t)},e.pause=function(){te(),I=!0,E.pause()},e.resume=function(){I=!1,E.resume(),$()},e.addResponseHandler=function(e){E._responseHandlers.push(e)},e._loadTransmitProfiles=function(e){te(),fe(),q=h.z3,$(),(0,s.z)(e,(function(e,n){var t=n.length;if(t>=2){var i=t>2?n[2]:0;if(n.splice(0,t-2),n[1]<0&&(n[0]=-1),n[1]>0&&n[0]>0){var a=n[0]/n[1];n[0]=Math.ceil(a)*n[1]}i>=0&&n[1]>=0&&i>n[1]&&(i=n[1]),n.push(i),A[e]=n}}))},e.flush=function(e,n,t){if(void 0===e&&(e=!0),!I)if(t=t||1,e)null==D?(te(),ce(1,0,t),D=ne((function(){D=null,se(n,t)}),0)):z.push(n);else{var i=te();V(1,1,t),null!=n&&n(),i&&$()}},e.setMsaAuthTicket=function(e){E.addHeader(y._s,e)},e.hasEvents=Y,e._setTransmitProfile=function(e){q!==e&&void 0!==A[e]&&(te(),q=e,$())},e._backOffTransmission=function(){N<4&&(N++,te(),$())},e._clearBackOff=function(){N&&(N=0,te(),$())},(0,s.r)(e,"_setTimeoutOverride",(function(){return R.set}),(function(e){R=(0,b.D_)(e,R.clear)})),(0,s.r)(e,"_clearTimeoutOverride",(function(){return R.clear}),(function(e){R=(0,b.D_)(R.set,e)}))})),i}return(0,i.qU)(n,e),n.__ieDyn=1,n}(v.s)}}]);